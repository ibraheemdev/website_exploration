<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Loading Data | Nushell</title><meta name=description content="Loading data into Nu for working with data"><link rel=canonical href=http://example.org/docs/book/loading_data/><link rel=stylesheet href=http://example.org/sass/main.css><meta property="og:title" content="Loading Data"><meta property="og:description" content="Loading data into Nu for working with data"><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/docs/book/loading_data/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Loading Data"><meta name=twitter:description content="Loading data into Nu for working with data"><script src=https://unpkg.com/quicklink@2.0.0/dist/quicklink.umd.js></script><script defer>quicklink.listen()</script></head><body><header class=nu-top-app-bar><div class=nu-top-app-bar__row><div class="nu-top-app-bar__section nu-top-app-bar__section--start"><span class=h1-minor><span class=nu-logo-green>nu</span><span class=nu-logo-black>shell</span></span></div><div class="nu-top-app-bar__section nu-top-app-bar__section--end"><a href=/ class="nu-top-app-bar__link h1-minor-minor"><span>home</span></a>
<a href=/docs class="nu-top-app-bar__link h1-minor-minor"><span>docs</span></a>
<a href=https://github.com/nushell/nushell class="nu-top-app-bar__link h1-minor-minor"><span>github</span></a></div></div></header><main class=nu-content><h2>Loading Data</h2><p>Earlier we saw how you can use commands like <code>ls</code>, <code>ps</code>, <code>date</code>, and <code>sys</code> to load information about your files, processes, time of date, and the system itself. Each command gives us a table of information that we can explore. There are other ways we can load in a table of data to work with.</p><h2 id=opening-files>Opening files</h2><p>One of Nu&rsquo;s most powerful assets in working with data is the <code>open</code> command. It is a multi-tool that can work with a number of different data formats. To see what this means, let&rsquo;s try opening a json file:</p><pre><code>&gt; open editors/vscode/package.json
──────────────────┬───────────────────────────────────────────────────────────────────────────────
 name             │ lark 
 description      │ Lark support for VS Code 
 author           │ Lark developers 
 license          │ MIT 
 version          │ 1.0.0 
 repository       │ [row type url] 
 publisher        │ vscode 
 categories       │ [table 0 rows] 
 keywords         │ [table 1 rows] 
 engines          │ [row vscode] 
 activationEvents │ [table 1 rows] 
 main             │ ./out/extension 
 contributes      │ [row configuration grammars languages] 
 scripts          │ [row compile postinstall test vscode:prepublish watch] 
 devDependencies  │ [row @types/mocha @types/node tslint typescript vscode vscode-languageclient] 
──────────────────┴───────────────────────────────────────────────────────────────────────────────
</code></pre><p>In a similar way to <code>ls</code>, opening a file type that Nu understands will give us back something that is more than just text (or a stream of bytes). Here we open a &ldquo;package.json&rdquo; file from a JavaScript project. Nu can recognize and open the JSON text and give back a table of data.</p><p>If we wanted to check the version of the project we were looking at, we can use the <code>get</code> command.</p><pre><code>&gt; open editors/vscode/package.json | get version
1.0.0
</code></pre><p>Nu currently supports the following formats for loading data directly into tables:</p><ul><li>json</li><li>yaml</li><li>toml</li><li>xml</li><li>csv</li><li>ini</li></ul><p>But what happens if you load a text file that isn&rsquo;t one of these? Let&rsquo;s try it:</p><pre><code>&gt; open README.md
</code></pre><p>We&rsquo;re shown the contents of the file. If the file is too large, we get a handy scroll-view to look at the file and then jump back to the terminal. To help with readability, Nu will also syntax-highlight common file formats like source files, markdown, and more.</p><p>Below the surface, what Nu sees in these text files is one large string. Next, we&rsquo;ll talk about how to work with these strings to get the data we need out of them.</p><h2 id=working-with-strings>Working with strings</h2><p>An important part of working with data coming from outside Nu is that it&rsquo;s not always in a format that Nu understands. Often this data is given to us as a string.</p><p>Let&rsquo;s imagine that we&rsquo;re given this data file:</p><pre><code>&gt; open people.txt
Octavia | Butler | Writer
Bob | Ross | Painter
Antonio | Vivaldi | Composer
</code></pre><p>Each bit of data we want is separated by the pipe (&lsquo;|&rsquo;) symbol, and each person is on a separate line. Nu doesn&rsquo;t have a pipe-delimited file format by default, so we&rsquo;ll have to parse this ourselves.</p><p>The first thing we want to do when bringing in the file is to work with it a line at a time:</p><pre><code>&gt; open people.txt | lines
───┬──────────────────────────────
 0 │ Octavia | Butler | Writer 
 1 │ Bob | Ross | Painter
 2 │ Antonio | Vivaldi | Composer 
───┴──────────────────────────────
</code></pre><p>We can see that we&rsquo;re working with the lines because we&rsquo;re back into a table. Our next step is to see if we can split up the rows into something a little more useful. For that, we&rsquo;ll use the <code>split</code> command. <code>split</code>, as the name implies, gives us a way to split a delimited string. We will use <code>split</code>'s <code>column</code> subcommand to split the contents across multiple columns. We tell it what the delimiter is, and it does the rest:</p><pre><code>&gt; open people.txt | lines | split column &quot;|&quot;
───┬──────────┬───────────┬───────────
 # │ Column1  │ Column2   │ Column3 
───┼──────────┼───────────┼───────────
 0 │ Octavia  │  Butler   │  Writer 
 1 │ Bob      │  Ross     │  Painter
 2 │ Antonio  │  Vivaldi  │  Composer 
───┴──────────┴───────────┴───────────
</code></pre><p>That almost looks correct. Looks like there is extra space there. Let&rsquo;s <code>trim</code> that extra space:</p><pre><code>&gt; open people.txt | lines | split column &quot;|&quot; | trim
───┬─────────┬─────────┬──────────
 # │ Column1 │ Column2 │ Column3 
───┼─────────┼─────────┼──────────
 0 │ Octavia │ Butler  │ Writer 
 1 │ Bob     │ Ross    │ Painter
 2 │ Antonio │ Vivaldi │ Composer 
───┴─────────┴─────────┴──────────
</code></pre><p>Not bad. The <code>split</code> command gives us data we can use. It also goes ahead and gives us default column names:</p><pre><code>&gt; open people.txt | lines | split column &quot;|&quot; | trim | get Column1
───┬─────────
 0 │ Octavia 
 1 │ Bob 
 2 │ Antonio 
───┴─────────
</code></pre><p>We can also name our columns instead of using the default names:</p><pre><code>&gt; open people.txt | lines | split column &quot;|&quot; first_name last_name job | trim 
───┬────────────┬───────────┬──────────
 # │ first_name │ last_name │ job 
───┼────────────┼───────────┼──────────
 0 │ Octavia    │ Butler    │ Writer 
 1 │ Bob        │ Ross      │ Painter
 2 │ Antonio    │ Vivaldi   │ Composer 
───┴────────────┴───────────┴──────────
</code></pre><p>Now that our data is in a table, we can use all the commands we&rsquo;ve used on tables before:</p><pre><code>&gt; open people.txt | lines | split column &quot;|&quot; first_name last_name job | trim | sort-by first_name
───┬────────────┬───────────┬──────────
 # │ first_name │ last_name │ job 
───┼────────────┼───────────┼──────────
 0 │ Antonio    │ Vivaldi   │ Composer 
 1 │ Bob        │ Ross      │ Painter
 2 │ Octavia    │ Butler    │ Writer 
───┴────────────┴───────────┴──────────
</code></pre><p>There are other commands you can use to work with strings:</p><ul><li>str</li><li>lines</li><li>size</li><li>trim</li></ul><p>There is also a set of helper commands we can call if we know the data has a structure that Nu should be able to understand. For example, let&rsquo;s open a Rust lock file:</p><pre><code>&gt; open Cargo.lock
# This file is automatically @generated by Cargo.
# It is not intended for manual editing.
[[package]]
name = &quot;adhoc_derive&quot;
version = &quot;0.1.2&quot;
</code></pre><p>The &ldquo;Cargo.lock&rdquo; file is actually a .toml file, but the file extension isn&rsquo;t .toml. That&rsquo;s okay, we can use the <code>from</code> command using the <code>toml</code> subcommand:</p><pre><code>&gt; open Cargo.lock | from toml
──────────┬───────────────────
 metadata │ [row 107 columns] 
 package  │ [table 130 rows] 
──────────┴───────────────────
</code></pre><p>The <code>from</code> command can be used for each of the structured data text formats that Nu can open and understand by passing it the supported format as a subcommand.</p><h2 id=opening-in-raw-mode>Opening in raw mode</h2><p>While it&rsquo;s helpful to be able to open a file and immediately work with a table of its data, this is not always what you want to do. To get to the underlying text, the <code>open</code> command can take an optional <code>--raw</code> flag:</p><pre><code>&gt; open Cargo.toml --raw
[package]                                                                                        name = &quot;nu&quot;
version = &quot;0.1.3&quot;
authors = [&quot;Yehuda Katz &lt;wycats@gmail.com&gt;&quot;, &quot;Jonathan Turner &lt;jonathan.d.turner@gmail.com&gt;&quot;]
description = &quot;A shell for the GitHub era&quot;
license = &quot;MIT&quot;
</code></pre><h2 id=fetching-urls>Fetching URLs</h2><p>In addition to loading files from your filesystem, you can also load URLs by using the <code>fetch</code> command. This will fetch the contents of the URL from the internet and return it to you:</p><pre><code>&gt; fetch https://www.jonathanturner.org/feed.xml
─────┬───────────────────────────
 rss │ [row attributes children] 
─────┴───────────────────────────
</code></pre></main><hr class=footer-line><div class=language-footer><a href=http://example.org/es/docs/book/loading_data/>es: Cargando datos</a></div></body></html>